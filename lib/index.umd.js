!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("launchdarkly-js-client-sdk"),require("lodash.camelcase"),require("hoist-non-react-statics")):"function"==typeof define&&define.amd?define(["exports","react","launchdarkly-js-client-sdk","lodash.camelcase","hoist-non-react-statics"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["launchdarkly-react-client-sdk"]={},e.React,e.launchdarklyJsClientSdk,e.camelCase,e.hoistNonReactStatics)}(this,(function(e,t,n,r,i){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var u=a(t),s=o(t),l=o(r),c=o(i),f=function(e,t){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},f(e,t)};function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};function h(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function u(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))}function v(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var y={useCamelCaseFlagKeys:!0},g=t.createContext({flags:{},ldClient:void 0}),b=g.Provider,C=g.Consumer,m=function(e){var t={};for(var n in e)0!==n.indexOf("$")&&(t[l.default(n)]=e[n]);return t},O=function(e,t,n){var r={};for(var i in e){if(!t||void 0!==t[i])r[n.useCamelCaseFlagKeys?l.default(i):i]=e[i].current}return r},w=function(e,t,n){void 0===t&&(t=y);var r={};if(n)for(var i in n)r[i]=e.variation(i,n[i]);else r=e.allFlags();return t.useCamelCaseFlagKeys?m(r):r};m.camelCaseKeys=m;var j=function(e,t,r,i,o){return void 0===t&&(t={anonymous:!0}),void 0===r&&(r=y),h(void 0,void 0,void 0,(function(){var a,u;return v(this,(function(s){return a=d({wrapperName:"react-client-sdk",wrapperVersion:"2.23.2"},i),u=n.initialize(e,t,a),[2,new Promise((function(e){u.on("ready",(function(){var t=w(u,r,o);e({flags:t,ldClient:u})}))}))]}))}))},k=function(e){function t(t){var n=e.call(this,t)||this;n.getReactOptions=function(){return d(d({},y),n.props.reactOptions)},n.subscribeToChanges=function(e){var t=n.props.flags;e.on("change",(function(e){var r=O(e,t,n.getReactOptions());Object.keys(r).length>0&&n.setState((function(e){var t=e.flags;return{flags:d(d({},t),r)}}))}))},n.initLDClient=function(){return h(n,void 0,void 0,(function(){var e,t,n,r,i,o,a,u,s;return v(this,(function(l){switch(l.label){case 0:return e=this.props,t=e.clientSideID,n=e.flags,r=e.options,i=e.user,o=this.getReactOptions(),[4,j(t,i,o,r,n)];case 1:return a=l.sent(),u=a.flags,s=a.ldClient,this.setState({flags:u,ldClient:s}),this.subscribeToChanges(s),[2]}}))}))};var r=t.options;if(n.state={flags:{},ldClient:void 0},r){var i=r.bootstrap;if(i&&"localStorage"!==i){var o=n.getReactOptions().useCamelCaseFlagKeys?m(i):i;n.state={flags:o,ldClient:void 0}}}return n}return p(t,e),t.prototype.componentDidMount=function(){return h(this,void 0,void 0,(function(){var e,t;return v(this,(function(n){switch(n.label){case 0:return e=this.props,t=e.user,e.deferInitialization&&!t?[2]:[4,this.initLDClient()];case 1:return n.sent(),[2]}}))}))},t.prototype.componentDidUpdate=function(e){return h(this,void 0,void 0,(function(){var t,n,r,i;return v(this,(function(o){switch(o.label){case 0:return t=this.props,n=t.user,r=t.deferInitialization,i=!e.user&&n,r&&i?[4,this.initLDClient()]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}}))}))},t.prototype.render=function(){return u.createElement(b,{value:this.state},this.props.children)},t}(u.Component);e.LDProvider=k,e.asyncWithLDProvider=function(e){return h(this,void 0,void 0,(function(){var n,r,i,o,a,u,l,c;return v(this,(function(f){switch(f.label){case 0:return n=e.clientSideID,r=e.user,i=e.flags,o=e.options,a=e.reactOptions,u=d(d({},y),a),[4,j(n,r,u,o,i)];case 1:return l=f.sent().ldClient,c=function(e){var n=e.children,r=t.useState({flags:w(l,u,i),ldClient:l}),a=r[0],c=r[1];return t.useEffect((function(){if(o){var e=o.bootstrap;if(e&&"localStorage"!==e){var t=u.useCamelCaseFlagKeys?m(e):e;c((function(e){return d(d({},e),{flags:t})}))}}l.on("change",(function(e){var t=O(e,i,u);Object.keys(t).length>0&&c((function(e){return d(d({},e),{flags:d(d({},e.flags),t)})}))}))}),[]),s.default.createElement(b,{value:a},n)},[2,c]}}))}))},e.camelCaseKeys=m,e.useFlags=function(){return t.useContext(g).flags},e.useLDClient=function(){return t.useContext(g).ldClient},e.withLDConsumer=function(e){return void 0===e&&(e={clientOnly:!1}),function(t){return function(n){return u.createElement(C,null,(function(r){var i=r.flags,o=r.ldClient;return e.clientOnly?u.createElement(t,d({ldClient:o},n)):u.createElement(t,d({flags:i,ldClient:o},n))}))}}},e.withLDProvider=function(e){return function(t){var n=e.reactOptions,r=d(d({},y),n),i=d(d({},e),{reactOptions:r}),o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return p(n,e),n.prototype.render=function(){return u.createElement(k,d({},i),u.createElement(t,d({},this.props)))},n}(u.Component);return c.default(o,t),o}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.js.map
